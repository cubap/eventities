<!DOCTYPE html>
<html ng-app="Eventities">

    <head>
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" media="all">
        <link rel="stylesheet" href="style.css" />
    </head>

    <body class="container" ng-controller="MainController">
        <div ng-controller="AdminController">
            <ul>
                <li ng-repeat="(key,each) in types">{{key}}</li>
            </ul>
            <form name="newEntity" id="newEntity" ng-submit="addToConfig(newEntity)" class="panel panel-default" ng-cloak>
                <div class="panel-heading">
                    <h3 class="panel-title">New Entry</h3>
                </div>
                <div class="panel-body">
                    <p class="help-block">
                        To add a new type of entity or event, use the form below.
                    </p>
                    <ol>
                        <li ng-class="{'text-muted':newEnt.label,'text-danger':!newEnt.label && newEnt['@type']}">Add a label by which <span class='label label-default' ng-class="{'label-warning':!newEnt.label}">{{newEnt.label||'this new entity'}}</span> will be known.<i ng-show="newEnt.label" class="fa fa-check "></i></li>
                        <li ng-class="{'text-muted':newEnt['@type']}">Identify a type for this new entity from a known context, if possible.<i ng-show="newEnt['@type']" class="fa fa-check "></i></li>
                        <li ng-class="{'text-muted':newEnt.class}">Select a class from which it will inherit fields and requirements.<i ng-show="newEnt.class" class="fa fa-check "></i></li>
                        <li ng-class="{'text-muted':newEnt.defaultFields}">Confirm the default fields or add more.<i ng-show="newEnt.defaultFields" class="fa fa-check "></i></li>
                        <li ng-class="{'text-muted':newEnt.requires}">Add any required elements.<i ng-show="newEnt.requires" class="fa fa-check "></i></li>
                    </ol>
                    <div class="form-group">
                        <label>Label:</label><input class="form-control" ng-model="newEnt.label" type="text" name="label" placeholder="Short descriptive term for this entity">
                    </div>
                    <div class="form-group">
                        <label>Type:</label><input class="form-control" ng-model="newEnt['@type']" type="text" name="@type" placeholder="Well-defined URI or contextual reference" >
                    </div>
                    <div class="form-group">
                        <label>Class:</label> <span>{{newEnt.class}}</span>
                        <div class="col-xs-12">
                            <button class="btn btn-default" type="button" ng-show="newEnt.class" ng-click="newEnt.class = types[newEnt.class].class">
                                <i class="fa fa-arrow-up"></i>
                            </button>
                            <div class="btn-group">
                                <button type="button" class="btn btn-default" ng-repeat="c in ofClass(newEnt.class)" ng-click="newEnt.class = c">{{c}}</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Default Fields:</label>
                        <button class="btn btn-info" type="button"
                                ng-click="loadClassDefaults()"
                                ng-show="newEnt.class">
                            Load from {{newEnt.class}}
                        </button>
                        <accordion>
                            <accordion-group heading="{{field.label}}" class="form-group" ng-repeat="field in newEnt.defaultFields">
                                <label>type</label> <input class="form-control" ng-model='field["@id"]' placeholder='context or uri to link'>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label>default value</label> <input class="form-control" ng-model="field._defaultValue" placeholder='initial setting'>
                                    </div>
                                    <div class="col-sm-3">
                                        <label>Minimum</label>
                                        <input type="number" class="form-control" ng-model="field._nMin">
                                    </div>
                                    <div class="col-sm-3">
                                        <label>Maximum</label>
                                        <div class="input-group">
                                            <input ng-hide="field._infinite" min="0" type="number" class="form-control" ng-model="field._nMax">
                                            <input ng-show="field._infinite" class="form-control" disabled value="&infin;">
                                            <span class="input-group-btn">
                                                <label class="btn btn-primary" ng-model="field._infinite" btn-checkbox>
                                                    {{field._infinite && "unlimited" ||"&infin;"}}
                                                </label>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <label>Expected value types</label>
                                <span class="label label-info" ng-repeat="f in field._typeOf">{{f}}</span>
                                <div class="col-xs-12">
                                    <p class="help-block">Basic Types</p>
                                    <div class="btn-group btn-group-justified col-xs-12">
                                        <a class="btn btn-default" ng-click='toggleValue(field, value)'
                                           role="button" ng-class="{active:field._typeOf.indexOf(value)>-1}"
                                           ng-repeat='value in defaultObjectTypes'>{{value}}</a>
                                    </div>
                                </div>
                                <div class="col-xs-12">
                                    <p class="help-block">Entity References</p>
                                    <div class="btn-group btn-group-justified col-xs-12">
                                        <a class="btn btn-default" ng-click='toggleValue(field, value)'
                                           role="button" ng-class="{active:field._typeOf.indexOf(value)>-1}"
                                           ng-repeat="(value,t) in types">{{value}}</a>
                                    </div>
                                </div>
                            </accordion-group>
                            <!--                            <accordion-group heading="{{field.label}}" class="form-group" ng-repeat="field in inheritedFields">
                                                            <div class="form-group">
                                    <label>type</label>
                                    <input class="form-control" ng-model='field["@id"]' placeholder='context or uri to link'>
                                </div>
                                <div class="form-group clearfix">
                                    <div class="col-sm-6">
                                        <label>default value</label> <input class="form-control" ng-model="field._defaultValue" placeholder='initial setting'>
                                    </div>
                                    <div class="col-sm-3">
                                        <label>Minimum</label>
                                        <input type="number" class="form-control" ng-model="field._nMin">
                                    </div>
                                    <div class="col-sm-3">
                                        <label>Maximum</label>
                                        <div class="input-group">
                                            <input ng-hide="field._infinite" min="0" type="number" class="form-control" ng-model="field._nMax">
                                            <input ng-show="field._infinite" class="form-control" disabled value="&infin;">
                                            <span class="input-group-btn">
                                                <label class="btn btn-primary" ng-model="field._infinite" btn-checkbox>
                                                    {{field._infinite && "unlimited" ||"&infin;"}}
                                                </label>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Acceptable value types</label>
                                <span class="label label-info" ng-repeat="f in field._typeOf">{{f}}</span>
                                <div class="col-xs-12">
                                    <p class="help-block">Basic Types</p>
                                    <div class="btn-group btn-group-justified col-xs-12">
                                        <a class="btn btn-default" ng-click='toggleValue(field, value)'
                                           role="button" ng-class="{active:field._typeOf.indexOf(value)>-1}"
                                           ng-repeat='value in defaultObjectTypes'>{{value}}</a>
                                    </div>
                                </div>
                                <div class="col-xs-12">
                                    <p class="help-block">Entity References</p>
                                    <div class="btn-group btn-group-justified col-xs-12">
                                        <a class="btn btn-default" ng-click='toggleValue(field, value)'
                                           role="button" ng-class="{active:field._typeOf.indexOf(value)>-1}"
                                           ng-repeat="(value,t) in types">{{value}}</a>
                                    </div>
                                </div>
                                </div>
                                                        </accordion-group>-->
                        </accordion>
                    </div>
                </div>
                <div class="panel-footer">
                    <button class="btn btn-primary" type="submit">+</button>
                </div>
            </form>
        </div>
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular-route.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular-animate.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.1/ui-bootstrap.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.1/ui-bootstrap-tpls.js"></script>
        <script src="https://cdn.rawgit.com/gsklee/ngStorage/master/ngStorage.js"></script>
        <script src="script.js"></script>
    </body>

</html>
